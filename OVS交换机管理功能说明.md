# OVS 交换机管理功能说明

## 🎯 功能概述

前端已完整对接后端的所有交换机管理功能，包括基础管理和高级配置。

## 📋 功能列表

### 1. 基础管理功能
- ✅ **交换机列表** - 查看所有OVS交换机
- ✅ **新增交换机** - 创建新的OVS交换机
- ✅ **删除交换机** - 删除指定的OVS交换机
- ✅ **端口管理** - 配置交换机端口

### 2. 高级配置功能
- ✅ **NetFlow配置** - 设置网络流量监控
- ✅ **sFlow配置** - 设置采样流量监控
- ✅ **STP/RSTP配置** - 设置生成树协议
- ✅ **IPFIX配置** - 设置IP流量信息导出
- ✅ **QoS配置** - 设置服务质量控制
- ✅ **流表查看** - 查看交换机流表

## 🚀 使用方法

### 1. 基础操作

#### 查看交换机列表
1. 进入"交换机管理"页面
2. 页面自动加载所有交换机
3. 点击"刷新"按钮更新列表

#### 新增交换机
1. 点击"新增交换机"按钮
2. 输入交换机名称
3. 点击"确定"完成创建

#### 删除交换机
1. 在交换机列表中找到目标交换机
2. 点击"删除"按钮
3. 确认删除操作

### 2. 高级配置

#### 打开高级配置
1. 在交换机列表中找到目标交换机
2. 点击"高级配置"按钮
3. 在弹出的标签页中选择要配置的功能

#### NetFlow 配置
用于网络流量监控和分析：

**配置参数：**
- **目标服务器**: NetFlow收集器地址和端口 (例如: 192.168.1.100:9995)
- **引擎ID**: NetFlow引擎标识符

**使用场景：**
- 网络流量分析
- 带宽监控
- 异常流量检测

#### sFlow 配置
用于网络流量采样监控：

**配置参数：**
- **目标服务器**: sFlow收集器地址列表 (每行一个)
- **采样率**: 流量采样比例 (例如: 1000表示1/1000)
- **头部长度**: 采样数据包头部长度
- **轮询间隔**: 统计信息轮询间隔(秒)
- **代理地址**: sFlow代理地址

**使用场景：**
- 网络性能监控
- 流量统计
- 网络故障诊断

#### STP/RSTP 配置
用于防止网络环路：

**配置参数：**
- **启用STP**: 开启生成树协议
- **启用RSTP**: 开启快速生成树协议

**使用场景：**
- 防止网络环路
- 提供网络冗余
- 自动故障切换

#### IPFIX 配置
用于IP流量信息导出：

**配置参数：**
- **目标服务器**: IPFIX收集器地址列表
- **采样率**: 流量采样比例
- **观察域ID**: 观察域标识符
- **观察点ID**: 观察点标识符

**使用场景：**
- 网络流量分析
- 安全监控
- 合规性报告

#### QoS 配置
用于服务质量控制：

**配置参数：**
- **端口名称**: 要配置QoS的端口
- **QoS类型**: 
  - Linux HTB (分层令牌桶)
  - Linux HFSC (分层公平服务曲线)
  - Linux CBQ (基于类的队列)
- **最大速率**: 端口最大带宽限制
- **队列配置**: 队列策略配置(JSON格式)

**使用场景：**
- 带宽控制
- 流量整形
- 优先级管理

### 3. 流表查看

#### 查看流表
1. 在交换机列表中找到目标交换机
2. 点击"查看流表"按钮
3. 在弹出的窗口中查看流表内容
4. 点击"刷新"按钮更新流表

**流表信息包括：**
- 匹配规则
- 动作指令
- 统计信息
- 优先级设置

## 🔧 配置示例

### NetFlow 配置示例
```
目标服务器: 192.168.1.100:9995
引擎ID: 1
```

### sFlow 配置示例
```
目标服务器:
192.168.1.100:6343
192.168.1.101:6343

采样率: 1000
头部长度: 128
轮询间隔: 30
代理地址: 192.168.1.1
```

### QoS 配置示例
```
端口名称: eth0
QoS类型: linux-htb
最大速率: 1000000
队列配置:
{
  "1": "100000",
  "2": "200000",
  "3": "300000"
}
```

## ⚠️ 注意事项

### 1. 权限要求
- 确保有足够的系统权限执行OVS命令
- 某些配置可能需要root权限

### 2. 网络配置
- NetFlow/sFlow/IPFIX需要确保网络连通性
- 目标服务器需要正确配置并运行相应的收集器

### 3. 性能影响
- 启用监控功能会消耗一定的系统资源
- 采样率设置过低可能影响监控效果
- 采样率设置过高可能影响网络性能

### 4. 配置验证
- 配置完成后建议验证功能是否正常
- 检查日志确认配置是否生效
- 测试网络连通性和数据收集

## 🛠️ 故障排除

### 常见问题

#### 1. 配置保存失败
**可能原因：**
- 网络连接问题
- 权限不足
- 参数格式错误

**解决方法：**
- 检查网络连接
- 确认权限设置
- 验证参数格式

#### 2. 监控数据无法收集
**可能原因：**
- 目标服务器未运行
- 网络防火墙阻止
- 配置参数错误

**解决方法：**
- 检查收集器服务状态
- 检查防火墙设置
- 验证配置参数

#### 3. QoS配置不生效
**可能原因：**
- 端口名称错误
- 系统不支持所选QoS类型
- 配置参数格式错误

**解决方法：**
- 确认端口名称正确
- 检查系统支持的QoS类型
- 验证配置参数格式

## 📞 技术支持

如果遇到问题，请检查：
1. 系统日志
2. OVS服务状态
3. 网络连接
4. 配置参数

建议在测试环境中先验证配置，确认无误后再应用到生产环境。 